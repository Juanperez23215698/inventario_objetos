{% extends "base.html" %}

{% block title %}Inventario - Inventario de Objetos{% endblock %}

{% block content %}
<a href="/inicio_login" class="regresar" style="color: #39a900; text-decoration: none;">
    <i class="fas fa-arrow-left"></i> Regresar
</a>

<h1>Inventario de Objetos</h1>

<!-- Buscador y botón para mostrar todo -->
<div class="search-container">
    <form name="formSearch" method="POST" action="{{ url_for('buscar_route') }}" class="search-container" autocomplete="off">
        <input type="search" name="buscar" class="search_input" placeholder="Buscar por nombre, descripción, ID o tipo...">
        <button type="submit" class="search_btn">Buscar</button>
    </form>
    <a href="{{ url_for('inventario_objetos') }}" class="btn btn-primary">Mostrar Todo</a>
</div>

<!-- Mensaje de búsqueda -->
{% if busqueda %}
<div class="search-message">
    <p>Mostrando resultados para la búsqueda: "{{ busqueda }}"</p>
    {% if inventario|length == 0 %}
    <p>No se encontraron resultados.</p>
    {% else %}
    <p>Se encontraron {{ inventario|length }} resultado(s).</p>
    {% endif %}
</div>
{% endif %}

<!-- Tabla de inventario -->
<div class="mdl-grid">
    <div class="mdl-cell mdl-cell--12-col">
        <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp full-width table-responsive">
            <thead>
                <tr>
                    <th class="mdl-data-table__cell--non-numeric">ID</th>
                    <th class="mdl-data-table__cell--non-numeric">Nombre Producto</th>
                    <th class="mdl-data-table__cell--non-numeric">Stock</th>
                    <th class="mdl-data-table__cell--non-numeric">Descripción</th>
                    <th class="mdl-data-table__cell--non-numeric">Tipo Objeto</th>
                    <th class="mdl-data-table__cell--non-numeric">Observaciones</th>
                    <th>Opciones</th>
                </tr>
            </thead>
            <tbody>
                {% for producto in inventario %}
                <tr>
                    <td class="mdl-data-table__cell--non-numeric">{{ producto.IdProducto }}</td>
                    <td class="mdl-data-table__cell--non-numeric">{{ producto.NombreProducto }}</td>
                    <td class="mdl-data-table__cell--non-numeric">{{ producto.CantidadProducto }}</td>
                    <td class="mdl-data-table__cell--non-numeric">{{ producto.DescripcionProducto }}</td>
                    <td class="mdl-data-table__cell--non-numeric">{{ producto.TipoProducto }}</td>
                    <td class="mdl-data-table__cell--non-numeric">{{ producto.ObservacionesProducto }}</td>
                    <td>
                        <a class="icon_edit" href="{{ url_for('editar_objeto', id=producto.IdProducto) }}" style="color: #39a900; text-decoration: none;">
                            <i class="fas fa-edit"></i> Editar
                        </a>
                        <a class="icon_delete" href="{{ url_for('confirmar_eliminar_objeto', id=producto.IdProducto) }}" style="color: red; text-decoration: none;">
                            <i class="fas fa-trash-alt"></i> Eliminar
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}